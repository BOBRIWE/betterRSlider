!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("jQuery")):"function"==typeof define&&define.amd?define(["jQuery"],t):"object"==typeof exports?exports.betterRSlider=t(require("jQuery")):e.betterRSlider=t(e.jQuery)}(window,(function(e){return function(e){var t={};function i(s){if(t[s])return t[s].exports;var n=t[s]={i:s,l:!1,exports:{}};return e[s].call(n.exports,n,n.exports,i),n.l=!0,n.exports}return i.m=e,i.c=t,i.d=function(e,t,s){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(s,n,function(t){return e[t]}.bind(null,n));return s},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=4)}([function(t,i){t.exports=e},function(e,t){},,,function(e,t,i){"use strict";i.r(t);var s=i(0),n=i.n(s);class o{static toPercents(e,t,i){return 100*(i-e)/(t-e)}}var r=class{constructor(e,t){this._model=e,this._rootObject=t,this._rendered=()=>{}}get mainPoint(){return this._pointLeft}get secondPoint(){return this._secondPoint}get sliderLine(){return this._sliderLine}render(){this._renderBody(),this._render()}onRendered(e){this._rendered=e}_renderBody(){requestAnimationFrame(()=>{this._sliderContainer=n()("<div></div>"),this._sliderLine=n()("<div></div>"),this._pointLeft=n()("<div></div>"),this._secondPoint=n()("<div></div>"),this._rangeLine=n()("<div></div>"),this._mainPointCaption=n()(this._model.options.mainPointCaption),this._secondPointCaption=n()(this._model.options.secondPointCaption),this._sliderLine.addClass("better-rslider__line"),this._sliderContainer.addClass("better-rslider__container"),this._pointLeft.addClass("better-rslider__point-main"),this._secondPoint.addClass("better-rslider__point-second"),this._rangeLine.addClass("better-rslider__range-line"),this._pointLeft.appendTo(this._sliderLine),this._rangeLine.appendTo(this._sliderLine),this._sliderLine.appendTo(this._sliderContainer),this._rootObject.append(this._sliderContainer),this._mainPointCaption.appendTo(this._pointLeft),this._secondPoint.appendTo(this._secondPoint),this._rendered()})}_render(){requestAnimationFrame(()=>{"vertical"===this._model.options.orientation?this._renderVertical():this._renderHorizontal(),this._model.options.range?this._secondPoint.appendTo(this._sliderLine):this._secondPoint.detach()})}_renderVertical(){const e=o.toPercents(this._model.options.min,this._model.options.max,this._model.options.value),t=o.toPercents(this._model.options.min,this._model.options.max,this._model.options.valueSecond),i=this._model.options.range?t-e:e;this._rangeLine.css("left",""),this._model.options.range?this._rangeLine.css("bottom",e+"%"):this._rangeLine.css("bottom",""),this._rangeLine.css("height",i+"%"),this._rangeLine.css("width",""),this._pointLeft.css("bottom",e+"%"),this._pointLeft.css("left",""),this._secondPoint.css("bottom",t+"%"),this._secondPoint.css("left",""),this._setVertical()}_renderHorizontal(){const e=o.toPercents(this._model.options.min,this._model.options.max,this._model.options.value),t=o.toPercents(this._model.options.min,this._model.options.max,this._model.options.valueSecond),i=this._model.options.range?t-e:e;this._rangeLine.css("bottom",""),this._model.options.range?this._rangeLine.css("left",e+"%"):this._rangeLine.css("left",""),this._rangeLine.css("width",i+"%"),this._rangeLine.css("height",""),this._pointLeft.css("left",e+"%"),this._pointLeft.css("bottom",""),this._secondPoint.css("left",t+"%"),this._secondPoint.css("bottom",""),this._setHorizontal()}_setVertical(){this._sliderLine.addClass("better-rslider__line--vertical"),this._sliderContainer.addClass("better-rslider__container--vertical"),this._pointLeft.addClass("better-rslider__point--vertical"),this._secondPoint.addClass("better-rslider__point--vertical"),this._rangeLine.addClass("better-rslider__range-line--vertical")}_setHorizontal(){this._sliderLine.removeClass("better-rslider__line--vertical"),this._sliderContainer.removeClass("better-rslider__container--vertical"),this._pointLeft.removeClass("better-rslider__point--vertical"),this._secondPoint.removeClass("better-rslider__point--vertical"),this._rangeLine.removeClass("better-rslider__range-line--vertical")}onNotify(){this._render()}};class a{handleStep(e,t){const i=this._options,s=t?this._possiblesSecond:this._possibles,n=t?i.valueSecond%i.step:i.value%i.step;this._options.range&&(this._possibles=this._getPossibleValuesArray(i.min,i.valueSecond,i.step,i.value),this._possiblesSecond=this._getPossibleValuesArray(i.value,i.max,i.step,i.valueSecond));let o=n+Math.round(e/i.step)*i.step;return o=parseFloat(o.toFixed(2)),s.includes(o)?(t?i.valueSecond=o:i.value=o,Object.assign({},i)):i}_getPossibleValuesArray(e,t,i,s){const n=[];let o=s;for(;o<=t;)n.push(parseFloat(o.toFixed(2))),o+=i;for(o=s-i;o>=e;)n.push(parseFloat(o.toFixed(2))),o-=i;return n}_checkConstraints(e){if(e.value>e.max||e.range&&e.valueSecond>e.max)throw new Error("Value should be <= max");if(e.value<e.min||e.range&&e.valueSecond<e.min)throw new Error("Value should be >= min");if(e.step<=0)throw new Error("Step should be > 0");if(e.range&&e.value>e.valueSecond)throw new Error("Second value should be >= first value")}setOptions(e){const t=n.a.extend({},this._options,e);try{this._checkConstraints(t)}catch(e){return void console.error(e.message)}this._options=t,t.range?(this._possibles=this._getPossibleValuesArray(t.min,t.valueSecond,t.step,t.value),this._possiblesSecond=this._getPossibleValuesArray(t.value,t.max,t.step,t.valueSecond)):this._possibles=this._getPossibleValuesArray(t.min,t.max,t.step,t.value)}get options(){return Object.assign({},this._options)}}var l=class{constructor(e){this._listeners=[],this._optionsHandler=new a,this._optionsHandler.setOptions(e)}get options(){return Object.assign({},this._optionsHandler.options)}setOptions(e){this._optionsHandler.setOptions(e),this.notify()}handleStep(e,t){this._optionsHandler.handleStep(e,t),this.notify()}addListener(e){this._listeners.forEach(t=>{if(t===e)throw new Error("Observer already in the list")}),this._listeners.push(e)}notify(){const e=this._optionsHandler.options;e.callback&&e.callback(),this._listeners.forEach(e=>{e.onNotify()})}};i(1);class d{constructor(e,t){this._model=e,this._view=t,this._isSecond=!1,this._self=this}_mouseDownHandler(e){e.preventDefault(),this._isVertical="vertical"===this._model.options.orientation,this._startCoord=this._isVertical?e.clientY:e.clientX,this._curVal=this._isSecond?this._model.options.valueSecond:this._model.options.value;const t=this._isVertical?this._mouseMoveVerticalHandler:this._mouseMoveHandler;n()(document).on("mousemove",t.bind(this._self)),n()(document).on("mouseup",this._mouseUpHandler)}_mouseMoveHandler(e){const t=this._view.sliderLine.innerWidth(),i=(this._model.options.max-this._model.options.min)/t;this._model.handleStep(this._curVal+(e.clientX-this._startCoord)*i,this._isSecond)}_mouseMoveVerticalHandler(e){const t=this._view.sliderLine.innerHeight(),i=(this._model.options.max-this._model.options.min)/t;this._model.handleStep(-(-this._curVal+(e.clientY-this._startCoord)*i),this._isSecond)}_mouseUpHandler(){const e=this._isVertical?this._mouseMoveVerticalHandler:this._mouseMoveHandler;n()(document).off("mouseup",this._mouseUpHandler),n()(document).off("mousemove",e)}bind(){this._view.mainPoint.on("mousedown",e=>{this._isSecond=!1,this._mouseDownHandler.call(this._self,e)}),this._view.secondPoint.on("mousedown",e=>{this._isSecond=!0,this._mouseDownHandler.call(this._self,e)})}}const _={max:100,min:0,value:0,valueSecond:100,step:1,orientation:"horizontal",mainPointCaption:"<div></div>",secondPointCaption:"<div></div>"};n.a.fn.betterRSlider=function(e={}){if(this.data("model")){const t=this.data("model");return"options"===e?t.options:(t.setOptions(e),this)}const t=new l(n.a.extend({},_,e)),i=new r(t,this),s=new d(t,i);return t.addListener(i),i.onRendered(()=>{s.bind(),t.notify()}),i.render(),this.data("model",t),this}}]).default}));
//# sourceMappingURL=betterRSlider.min.js.map